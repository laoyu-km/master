# Prompt Enginerring

> 提示工程（Prompt Engineering）就是探讨如何设计出最佳提示词，用于指导语言模型帮助我们高效完成某项任务

## Introduciton

### LLM Settings

- LLM: Large Language Model

- 核采样技术： Temperature & top_p 用来控制模型返回结果的真实性, 如果你需要准确和事实的答案，就把参数值调低。如果你想要更多样化的答案，就把参数值调高一些

- Temperature: 0-1

- top_p

- 一般建议是改变其中一个参数就行，不用两个都调整

### Basics of Prompting

- 一个提示词包含: 指令*或*问题, 可以包含其他详细信息, 如*上下文*、*输入*或*示例*等

```bash
the sky is # 输出不可控续写

完善后面的句子： the sky is  # 给出比较符合要求的例句
```

- 提示词格式

```bash
# zero-shot prompting
<问题>? || <指令> # 标准提示词格式

Q: <问题>? # 标准问答格式
A:

# few-shot prompting
# few-shot 的问答模式
# Q: <问题>?
# A: <答案>
# Q: <问题>?
# A: <答案>
# Q: <问题>?
# A: <答案>
# Q: <问题>?
# A:
这组数字中的奇数加起来是一个偶数：4、8、9、15、12、2、1。
A：答案是False。
这组数字中的奇数加起来是一个偶数：16、11、14、4、8、13、24。
A：答案是True。
这组数字中的奇数加起来是一个偶数：17、9、10、12、13、4、2。
A：答案是False。
这组数字中的奇数加起来是一个偶数：15、32、5、13、82、7、1。
A：

# 问答模式并不是必须的
This is awesome! // Positive
This is bad! // Negative
Wow that movie was rad! // Positive
What a horrible show! //
```

### Prompt Elements

- 指令

- 上下文

- 输入数据

- 输出指示

### General Tips for Designing Prompts

- 从简单开始： 需要记住这是一个迭代的过程，需要大量的实验来获得最佳结果，您可以从简单的提示开始，随着您的目标是获得更好的结果，不断添加更多的元素和上下文，涉及许多不同子任务的大任务时，您可以尝试将任务分解为更简单的子任务，并随着获得更好的结果而不断构建

- 指令: 可以使用命令来指示模型执行各种简单任务，例如“写入”、“分类”、“总结”、“翻译”、“排序”等，从而为各种简单任务设计有效的提示建议将指令放在提示的开头。建议使用一些清晰的分隔符，如“###”，来分隔指令和上下文

```bash
### 指令 ###
将以下文本翻译成西班牙语：
文本：“hello！”
```

- 具体性： 提示越具体和详细，结果就越好。 在提示中提供示例非常有效，可以以特定格式获得所需的输出，在设计提示时，您还应考虑提示的长度，因为提示的长度有限制。考虑到您应该具体和详细的程度是需要考虑的。包含太多不必要的细节并不一定是一个好方法。

```bash
提取以下文本中的地名。
所需格式：
地点：<逗号分隔的公司名称列表>
输入：“虽然这些发展对研究人员来说是令人鼓舞的，但仍有许多谜团。里斯本未知的香帕利莫德中心的神经免疫学家Henrique Veiga-Fernandes说：“我们经常在大脑和我们在周围看到的效果之间有一个黑匣子。”“如果我们想在治疗背景下使用它，我们实际上需要了解机制。””
```

### 示例

- 文本概括

```bash
Q: Explain antibiotics # Q: 可省略
A:

Explain the above in one sentence # 进一步提炼上一步给出的信息
```

- 信息提取

```bash
研究论文中的作者贡献声明和致谢应清楚而具体地说明作者是否以及在多大程度上使用了ChatGPT等人工智能技术来准备他们的手稿和分析。它们还应该指出使用了哪些llm。这将提醒编辑和审稿人更仔细地审查手稿，以发现潜在的偏见、不准确和不适当的来源信用。同样，科学期刊在使用法学硕士时也应保持透明，例如在选择提交的稿件时。

(需求：)指出上文中提到的大语言模型
```

- 问答

```bash
# 提示词可以通过指令、上下文、输入和输出指示以改进响应结果。 虽然这些要素不是必需的，但如果您的指示越明确，响应的结果就会越好
基于以下语境回答问题。如果不知道答案的话，请回答“不确定答案”
Context: Teplizumab起源于新泽西州一家名为Ortho Pharmaceutical的制药公司。在那里，科学家们产生了这种抗体的早期版本，被称为OKT3。这种分子最初来源于小鼠，能够结合到T细胞表面，限制它们杀死细胞的潜力。1986年，它被批准用于预防肾移植后的器官排斥反应，这使它成为第一个被允许用于人体的治疗性抗体。
Question: OKT3最初的来源是什么?
Answer:
```

- 文本分类

```bash
# 对于更负责的使用场景，仅提供指令是远远不够的。 所以，您需要思考如何在提示词中包含相关语境和其他不同要素。 同样，你还可以提供其他的信息，如输入数据和示例
# 例子中的分类使用英文的准确度高，中文不好说
Classify the text into neutral, negative or positive. # 将文本按中立、负面或正面进行分类
Text: I think the food was okay.
Sentiment:

# 如果我们想要语言模型以指定格式作出相应， 比如，我们想要它返回 neutral 而不是 Neutral， 那我们要如何做呢？有多种方法，此例使用示例来矫正结果
Classify the text into neutral, negative or positive.
Text: I think the vacation is okay.
Sentiment: neutral
Text: I think the food was okay.
Sentiment:

```

- 对话

```bash
# 可以通过提示工程指导大语言模型系统如何表现，指定它的行为意图和身份,如果你正在构建客服聊天机器人之类的对话系统时，这项功能尤其有用
以下是与 AI 助理的对话，语气应该专业、技术性强
人类：你好，你是谁？
AI: 问候!我是人工智能研究助理。今天我能为您效劳吗?
人类：你能告诉我黑洞的形成过程吗?
AI:

# 让AI给出更易于理解的答案
以下是与 AI 助理的对话。请给出易于理解的答案，最好是小学生都能看懂的那种
人类：你好，你是谁？
AI: 问候!我是人工智能研究助理。今天我能为您效劳吗?
人类：你能告诉我黑洞的形成过程吗?
AI:

以下是与 德和罐头厂AI 助理的对话。语气应该专业，亲和力强
人类：你好，你是谁？
AI: 问候!我是德和罐头厂的AI客服助理。今天我能为您效劳吗?
人类：你能告诉我午餐肉罐头的信息吗？
AI:
```

- 代码生成

```bash
# 大语言模型另外一个有效的应用场景是代码生成 Copilot 就是一个很好的示例。 你可以通过一些有效的提示词执行代码生成任务
/*
询问用户的姓名并说“ Hello”
*/

/**
为100条数据制作分页，每页20条
使用es6
*/

# MySQL数据库语句生成
"""
Table departments, columns = [DepartmentId, DepartmentName]
Table students, columns = [DepartmentId, StudentId, StudentName]
Create a MySQL query for all students in the Computer Science Department
"""
```

- 推理

```bash
What is 9,000 * 9,000?

The odd numbers in this group add up to an even number: 15, 32, 5, 13, 82, 7, 1.
A: # in the gpt-3.5 the answer is right

The odd numbers in this group add up to an even number: 15, 32, 5, 13, 82, 7, 1.
Solve by breaking the problem into steps. First, identify the odd numbers, add them, and indicate whether the result is odd or even.
A: # the answer is right
```

## 提示技术

### zero-shot prompt

- 有向模型提供任何示例

```bash
将文本分类为中性、负面或正面。
文本：我认为这次假期还可以。
情感：
```

### few-shot prompt

```bash
“whatpu”是坦桑尼亚的一种小型毛茸茸的动物。一个使用whatpu这个词的句子的例子是：
我们在非洲旅行时看到了这些非常可爱的whatpus。
“farduddle”是指快速跳上跳下。一个使用farduddle这个词的句子的例子是：
```

### Chain-of-Thought Prompting -> 链式思考（CoT）

```bash
这组数中的奇数加起来是偶数：4、8、9、15、12、2、1。
A：将所有奇数相加（9、15、1）得到25。答案为False。
这组数中的奇数加起来是偶数：15、32、5、13、82、7、1。
A：

# 零样本提示的CoT就是增加 "请逐步思考" 这句话
我去市场买了10个苹果。我给了邻居2个苹果和修理工2个苹果。然后我去买了5个苹果并吃了1个。我还剩下多少苹果？逐步思考

```

### 自我一致性

- 自我一致性旨在“替换链式思维提示中使用的天真贪婪解码方法”。其想法是通过少样本 CoT 采样多个不同的推理路径，并使用生成结果选择最一致的答案

```bash
# 多次输入统一问题，给出的答案不一样
当我6岁时，我的妹妹是我的一半年龄。现在我70岁了，我的妹妹多大？

# 多次输入同一问题，给出的答案基本一致
Q：林中有15棵树。林业工人今天将在林中种树。完成后，将有21棵树。林业工人今天种了多少棵树？
A：我们从15棵树开始。后来我们有21棵树。差异必须是他们种树的数量。因此，他们必须种了21-15 = 6棵树。答案是6。
Q：停车场有3辆汽车，又来了2辆汽车，停车场有多少辆汽车？
A：停车场已经有3辆汽车。又来了2辆。现在有3 + 2 = 5辆汽车。答案是5。
Q：Leah有32块巧克力，她的姐姐有42块。如果他们吃了35块，他们总共还剩多少块？
A：Leah有32块巧克力，Leah的姐姐有42块。这意味着最初有32 + 42 = 74块巧克力。已经吃了35块。因此，他们总共还剩74-35 = 39块巧克力。答案是39。
Q：Jason有20个棒棒糖。他给Denny一些棒棒糖。现在Jason只有12个棒棒糖。Jason给Denny多少棒棒糖？
A：Jason有20个棒棒糖。因为他现在只有12个，所以他必须把剩下的给Denny。他给Denny的棒棒糖数量必须是20-12 = 8个棒棒糖。答案是8。
Q：Shawn有五个玩具。圣诞节，他从他的父母那里得到了两个玩具。他现在有多少个玩具？
A：他有5个玩具。他从妈妈那里得到了2个，所以在那之后他有5 + 2 = 7个玩具。然后他从爸爸那里得到了2个，所以总共他有7 + 2 = 9个玩具。答案是9。
Q：服务器房间里有9台计算机。从周一到周四，每天都会安装5台计算机。现在服务器房间里有多少台计算机？
A：从周一到周四有4天。每天都添加了5台计算机。这意味着总共添加了4 * 5 =
20台计算机。一开始有9台计算机，所以现在有9 + 20 = 29台计算机。答案是29。
Q：Michael有58个高尔夫球。星期二，他丢失了23个高尔夫球。星期三，他又丢失了2个。星期三结束时他还剩多少个高尔夫球？
A：Michael最初有58个球。星期二他丢失了23个，所以在那之后他有58-23 = 35个球。星期三他又丢失了2个，所以现在他有35-2 = 33个球。答案是33。
Q：Olivia有23美元。她用每个3美元的价格买了五个百吉饼。她还剩多少钱？
A：她用每个3美元的价格买了5个百吉饼。这意味着她花了5
Q：当我6岁时，我的妹妹是我的一半年龄。现在我70岁了，我的妹妹多大？
A：
```

### 生成知识提示

- 在问问题的同时给出一些相关知识，带来的答案很有趣

```bash
# 提示中给出对应的知识,提示的不同会影响模型给出的结果
问题：高尔夫球的一部分是试图获得比其他人更高的得分。是或否？
知识：高尔夫球的目标是以最少的杆数打完一组洞。一轮高尔夫球比赛通常包括18个洞。每个洞在标准高尔夫球场上一轮只打一次。每个杆计为一分，总杆数用于确定比赛的获胜者。
解释和答案：

问题：高尔夫球的一部分是试图获得比其他人更高的得分。是或否？
知识：高尔夫球是一项精密的球杆运动，竞争选手（或高尔夫球手）使用许多类型的球杆，用最少的杆数将球打入球场上一系列洞中。目标是以最低的分数完成比赛，该分数是通过将每个洞上所用的杆数相加计算出来的。得分最低的选手赢得比赛。
解释和答案：

问题：普洱茶的年份越长越值钱. 是或否？
知识：普洱茶经过长时间的陈放和发酵，会逐渐变得更加柔和、醇香，口感也会更加丰富。因此，一些高档的普洱茶饼或普洱散茶，经过数十年甚至上百年的陈放，其价格往往会非常昂贵
解释和答案：

问题：普洱茶的年份越长越值钱. 是或否？
知识：普洱茶经过长时间的陈放和发酵，会逐渐变得更加柔和、醇香，口感也会更加丰富。但是还有其他因素会影响它的价格，让它不值钱
解释和答案：
```

## 学习资料

- git: awesome chatgpt prompts

- https://learningprompt.wiki/

- Prompt Engineering Guide: https://www.promptingguide.ai/zh, https://github.com/dair-ai/Prompt-Engineering-Guide

- Learn Prompting: https://learnprompting.org/

LLMs: 是什么
